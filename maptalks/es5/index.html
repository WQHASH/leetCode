<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>地图 - 显示</title>
<style type="text/css">
  html,
  body {
    margin: 0px;
    height: 100%;
    width: 100%
  }

  .container {
    width: 100%;
    height: 100%
  }

  .my-control {
    background: #051127;
    border: 5px solid #fff;
    border-radius: 5px;
    color: #fff;
    height: 50px;
    line-height: 50px;
    text-align: center;
    font-size: 30px;
    padding: 0 8px
  }
</style>
<link rel="stylesheet" href="src/maptalks.css">
<script type="text/javascript" src="src/maptalks.js"></script>

<body>

  <div id="map" class="container"></div>
  <div id="info"></div>
  <script>
    console.log(maptalks, "maptalks");
    //创建地图
    var map = new maptalks.Map('map', {
      center: [-0.113049, 51.498568],
      zoom: 14,
      baseLayer: new maptalks.TileLayer('base', {
        urlTemplate: 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        subdomains: ['a', 'b', 'c'],
        attribution: '&copy; <a href="http://www.osm.org" target="_blank">OpenStreetMap</a> contributors'
      })
    });

    // 创建工具条
    new maptalks.control.Toolbar({
      'position': 'top-left',
      'items': [{
        item: 'menu',
        click: function () { info('menu'); },
        children: [{
          item: 'child 1',
          click: function () { info('child 1'); }
        }, {
          item: 'child 2',
          click: function () { info('child 2'); }
        }]
      }, {
        item: '距离量算',
        click: function () { 
          //绘制线距离
          distanceTool.addTo(map)
        }
      }, {
        item: '面积量算',
        click: function () { info('面积量算'); }
      }, {
        item: '画圆',
        click: function () { info('画圆'); }
      }, {
        item: '画多边形',
        click: function () { info('画多边形'); }
      }, {
        item: '地图放大',
        click: function () { info('地图放大'); }
      },
      {
        item: '地图缩小',
        click: function () { info('地图缩小'); }
      }
      ]
    })
      .addTo(map);

    function info(str) {
      document.getElementById('info').innerHTML = str + ' is clicked';
    }

    //创建矩形
    var center = map.getCenter();
    // Rectangle([x,y],width,height,{矩形属性})
    var rectangle = new maptalks.Rectangle(center.add(-0.018, 0.012), 800, 700, {
      symbol: {
        lineColor: '#34495e',
        lineWidth: 2,
        polygonFill: '#34495e',
        polygonOpacity: 0.4
      }
    });
    new maptalks.VectorLayer('vector')
      .addGeometry([rectangle])
      .addTo(map);
    console.log(rectangle, "rectangle")

    //地图取点： coordinate这种点
    map.on('click', function (param) {
      console.log(param, "param.coordinate");
    });

    //绘制距离线
    var distanceTool = new maptalks.DistanceTool({
      'symbol': {
        'lineColor': '#34495e',
        'lineWidth': 2
      },
      'vertexSymbol': {
        'markerType': 'ellipse',
        'markerFill': '#1bbc9b',
        'markerLineColor': '#000',
        'markerLineWidth': 3,
        'markerWidth': 10,
        'markerHeight': 10
      },

      'labelOptions': {
        'textSymbol': {
          'textFaceName': 'monospace',
          'textFill': '#fff',
          'textLineSpacing': 1,
          'textHorizontalAlignment': 'right',
          'textDx': 15,
          'markerLineColor': '#b4b3b3',
          'markerFill': '#000'
        },
        'boxStyle': {
          'padding': [6, 2],
          'symbol': {
            'markerType': 'square',
            'markerFill': '#000',
            'markerFillOpacity': 0.9,
            'markerLineColor': '#b4b3b3'
          }
        }
      },
      'clearButtonSymbol': [{
        'markerType': 'square',
        'markerFill': '#000',
        'markerLineColor': '#b4b3b3',
        'markerLineWidth': 2,
        'markerWidth': 15,
        'markerHeight': 15,
        'markerDx': 20
      }, {
        'markerType': 'x',
        'markerWidth': 10,
        'markerHeight': 10,
        'markerLineColor': '#fff',
        'markerDx': 20
      }],
      'language': 'en-US'
    });


    











      //1. 矩形的坐标是怎么计算的？？
      //2. 绘制图形时它坐标有什么方法能改变或记录坐标


  </script>
</body>

</html>
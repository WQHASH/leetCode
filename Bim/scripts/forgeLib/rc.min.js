function getGlobal(){return"undefined"!=typeof window&&null!==window?window:"undefined"!=typeof self&&null!==self?self:global}function trace(a){"\n"==a[a.length-1]&&(a=a.substring(0,a.length-1)),console.log((performance.now()/1e3).toFixed(3)+": "+a)}!function(){function a(){return"undefined"!=typeof window&&null!==window?window:"undefined"!=typeof self&&null!==self?self:global}function b(b){for(var c=a(),d=b.split("."),e=0;e<d.length;++e)c[d[e]]=c[d[e]]||{},c=c[d[e]];return c}b("Autodesk.Viewing.Private"),b("Autodesk.Viewing.Extensions"),b("Autodesk.Viewing.Shaders"),b("Autodesk.Viewing.UI"),b("Autodesk.LMVTK"),Autodesk.Viewing.getGlobal=a,Autodesk.Viewing.AutodeskNamespace=b,a().AutodeskNamespace=b}();var av=Autodesk.Viewing,avp=av.Private;av.getGlobal=getGlobal;var isBrowser=av.isBrowser="undefined"!=typeof navigator,isIE11=av.isIE11=isBrowser&&!!navigator.userAgent.match(/Edge|Trident\/7\./);"undefined"!=typeof window&&isIE11&&function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.CustomEvent.prototype,window.CustomEvent=a}(),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,b){if(!b||b>this.byteLength?b=this.byteLength:b<0&&(b=this.byteLength+b)<0&&(b=0),a<0&&(a=this.byteLength+a)<0&&(a=0),b<=a)return new ArrayBuffer;for(var c=b-a,d=new Uint8Array(this,a,c),e=new Uint8Array(c),f=0;f<c;f++)e[f]=d[f];return e.buffer}),function(){Math.log2=Math.log2||function(a){return Math.log(a)/Math.LN2}}(),"undefined"!=typeof window&&(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);var launchFullscreen=av.launchFullscreen=function(a,b){a.requestFullscreen?a.requestFullscreen(b):a.mozRequestFullScreen?a.mozRequestFullScreen(b):a.webkitRequestFullscreen?a.webkitRequestFullscreen(b):a.msRequestFullscreen&&a.msRequestFullscreen(b)},exitFullscreen=av.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},inFullscreen=av.inFullscreen=function(){return"webkitIsFullScreen"in document?!!document.webkitIsFullScreen:"fullscreenElement"in document?!!document.fullscreenElement:"mozFullScreenElement"in document?!!document.mozFullScreenElement:"msFullscreenElement"in document?!!document.msFullscreenElement:!!document.querySelector(".viewer-fill-browser")},fullscreenElement=av.fullscreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},isFullscreenAvailable=av.isFullscreenAvailable=function(a){return a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen},getAndroidVersion=av.getAndroidVersion=function(a){a=a||navigator.userAgent;var b=a.match(/Android\s([0-9\.]*)/);return!!b&&b[1]},isTouchDevice=av.isTouchDevice=function(){return"undefined"!=typeof window&&"ontouchstart"in window};av.isIOSDevice=function(){return!!isBrowser&&/ip(ad|hone|od)/.test(navigator.userAgent.toLowerCase())},av.isAndroidDevice=function(){return!!isBrowser&&-1!==navigator.userAgent.toLowerCase().indexOf("android")},av.isMobileDevice=function(){return!!isBrowser&&(av.isIOSDevice()||av.isAndroidDevice())},av.isSafari=function(){if(!isBrowser)return!1;var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")},av.isFirefox=function(){return!!isBrowser&&-1!==navigator.userAgent.toLowerCase().indexOf("firefox")},av.isChrome=function(){return!!isBrowser&&-1!==navigator.userAgent.toLowerCase().indexOf("chrome")},av.isMac=function(){return!!isBrowser&&-1!==navigator.userAgent.toLowerCase().indexOf("mac os")},av.isWindows=function(){if(!isBrowser)return!1;var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("win32")||-1!==a.indexOf("windows")},av.ObjectAssign=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},avp.disableTouchSafari=function(a){var b=window.hasOwnProperty("pageXOffset")?window.pageXOffset:document.documentElement.scrollLeft,c=window.hasOwnProperty("pageYOffset")?window.pageYOffset:document.documentElement.scrollTop,d=document.elementFromPoint(a.pageX-b,a.pageY-c);return!d||"CANVAS"!==d.nodeName||(!!d.getAttribute(!0)||(a.preventDefault(),!1))},avp.disableDocumentTouchSafari=function(){av.isMobileDevice()&&av.isSafari()&&(document.documentElement.addEventListener("touchstart",avp.disableTouchSafari,!0),document.documentElement.addEventListener("touchmove",avp.disableTouchSafari,!0),document.documentElement.addEventListener("touchcanceled",avp.disableTouchSafari,!0),document.documentElement.addEventListener("touchend",avp.disableTouchSafari,!0))},avp.enableDocumentTouchSafari=function(){av.isMobileDevice()&&av.isSafari()&&(document.documentElement.removeEventListener("touchstart",avp.disableTouchSafari,!0),document.documentElement.removeEventListener("touchmove",avp.disableTouchSafari,!0),document.documentElement.removeEventListener("touchcanceled",avp.disableTouchSafari,!0),document.documentElement.removeEventListener("touchend",avp.disableTouchSafari,!0))};var detectWebGL=av.detectWebGL=function(){if(window.WebGLRenderingContext){for(var a=document.createElement("canvas"),b=["webgl","experimental-webgl","moz-webgl","webkit-3d"],c=!1,d=0;d<4;d++)try{if(c=a.getContext(b[d]),(c=rescueFromPolymer(c))&&"function"==typeof c.getParameter)return 1}catch(a){}return 0}return-1},touchStartToClick=av.touchStartToClick=function(a){a.target.className.indexOf("fullscreen")>-1||a.target.className.indexOf("webvr")>-1||(a.preventDefault(),a.stopPropagation(),a.target.click())};!function(){var a=getGlobal();a.performance||(a.performance=Date)}(),Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},String.prototype.repeat=String.prototype.repeat||function(a){if(a<1)return"";for(var b="",c=this.valueOf();a>1;)1&a&&(b+=c),a>>=1,c+=c;return b+c},Array.prototype.fill=Array.prototype.fill||function(a,b,c){b=void 0===b?0:b,c=void 0===c?this.length:c;for(var d=b;d<c;++d)this[d]=a},Int32Array.prototype.lastIndexOf=Int32Array.prototype.lastIndexOf||function(a,b){return Array.prototype.lastIndexOf.call(this,a,b)},Array.prototype.find=Array.prototype.find||function(a,b){for(var c=this.length,d=0;d<c;++d){var e=this[d];if(a.call(b,e,d,this))return e}};var av=Autodesk.Viewing,avp=Autodesk.Viewing.Private;if(avp.BUILD_LMV_WORKER_URL="lmvworker.js",avp.LMV_WORKER_URL=avp.BUILD_LMV_WORKER_URL,avp.ENABLE_DEBUG=avp.ENABLE_DEBUG||!1,avp.ENABLE_INLINE_WORKER=!0,"undefined"!=typeof window&&function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return!!Array.isArray(a)&&(g(a,c[b],c),!0)}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],(e=c?c+f:b)in a)return e;g++}return d}function w(){return oa++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b=a.options.inputClass;return new(b||(ra?N:sa?Q:qa?S:M))(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&wa&&d-e==0,g=b&(ya|za)&&d-e==0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===wa||f.eventType===ya)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=za&&(i>va||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Aa:ma(a)>=ma(b)?a>0?Ba:Ca:b>0?Da:Ea}function I(a,b,c){c||(c=Ia);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ia);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Ja)-J(a[1],a[0],Ja)}function L(a,b){return I(b[0],b[1],Ja)/I(a[0],a[1],Ja)}function M(){this.evEl=La,this.evWin=Ma,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Pa,this.evWin=Qa,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Sa,this.evWin=Ta,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(ya|za)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Va,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(wa|xa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===wa)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(ya|za)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,_a))return _a;var b=q(a,ab),c=q(a,bb);return b&&c?ab+" "+bb:b||c?b?ab:bb:q(a,$a)?$a:Za}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=cb,this.simultaneous={},this.requireFail=[]}function W(a){return a&hb?"cancel":a&fb?"end":a&eb?"move":a&db?"start":""}function X(a){return a==Ea?"down":a==Da?"up":a==Ba?"left":a==Ca?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function aa(){V.apply(this,arguments),this._timer=null,this._input=null}function ba(){Z.apply(this,arguments)}function ca(){Z.apply(this,arguments)}function da(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ea(a,b){return b=b||{},b.recognizers=m(b.recognizers,ea.defaults.preset),new fa(a,b)}function fa(a,b){b=b||{},this.options=i(b,ea.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),ga(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ga(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ha(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ia=["","webkit","moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now,oa=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,qa="ontouchstart"in a,ra=v(a,"PointerEvent")!==d,sa=qa&&pa.test(navigator.userAgent),ta="touch",ua="mouse",va=25,wa=1,xa=2,ya=4,za=8,Aa=1,Ba=2,Ca=4,Da=8,Ea=16,Fa=Ba|Ca,Ga=Da|Ea,Ha=Fa|Ga,Ia=["x","y"],Ja=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ka={mousedown:wa,mousemove:xa,mouseup:ya},La="mousedown",Ma="mousemove mouseup";j(M,y,{handler:function(a){var b=Ka[a.type];b&wa&&0===a.button&&(this.pressed=!0),b&xa&&1!==a.which&&(b=ya),this.pressed&&this.allow&&(b&ya&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:ua,srcEvent:a}))}});var Na={pointerdown:wa,pointermove:xa,pointerup:ya,pointercancel:za,pointerout:za},Oa={2:ta,3:"pen",4:ua,5:"kinect"},Pa="pointerdown",Qa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Pa="MSPointerDown",Qa="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Na[d],f=Oa[a.pointerType]||a.pointerType,g=f==ta,h=s(b,a.pointerId,"pointerId");e&wa&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(ya|za)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ra={touchstart:wa,touchmove:xa,touchend:ya,touchcancel:za},Sa="touchstart",Ta="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Ra[a.type];if(b===wa&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(ya|za)&&c[0].length-c[1].length==0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}});var Ua={touchstart:wa,touchmove:xa,touchend:ya,touchcancel:za},Va="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Ua[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==ta,e=c.pointerType==ua;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(ya|za)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Wa=v(ja.style,"touchAction"),Xa=Wa!==d,Ya="compute",Za="auto",$a="manipulation",_a="none",ab="pan-x",bb="pan-y";T.prototype={set:function(a){a==Ya&&(a=this.compute()),Xa&&(this.manager.element.style[Wa]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Xa){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,_a),f=q(d,bb),g=q(d,ab);return e||f&&c&Fa||g&&c&Ga?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var cb=1,db=2,eb=4,fb=8,gb=fb,hb=16;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;fb>d&&b(!0),b(),d>=fb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|cb)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(gb|hb|32)&&(this.state=cb),this.state=this.process(b),void(this.state&(db|eb|fb|hb)&&this.tryEmit(b))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(db|eb),e=this.attrTest(a);return d&&(c&za||!e)?b|hb:d||e?c&ya?b|fb:b&db?b|eb:db:32}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ha},getTouchAction:function(){var a=this.options.direction,b=[];return a&Fa&&b.push(bb),a&Ga&&b.push(ab),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Fa?(e=0===f?Aa:0>f?Ba:Ca,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Aa:0>g?Da:Ea,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&db||!(this.state&db)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_a]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&db)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(aa,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Za]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(ya|za)&&!f)this.reset();else if(a.eventType&wa)this.reset(),this._timer=e(function(){this.state=gb,this.tryEmit()},b.time,this);else if(a.eventType&ya)return gb;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===gb&&(a&&a.eventType&ya?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),j(ba,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_a]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&db)}}),j(ca,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Fa|Ga,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Fa|Ga)?b=a.velocity:c&Fa?b=a.velocityX:c&Ga&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&ma(b)>this.options.velocity&&a.eventType&ya},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(da,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[$a]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&wa&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=ya)return this.failTimeout();var g=!this.pTime||a.timeStamp-this.pTime<b.interval,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=gb,this.tryEmit()},b.interval,this),db):gb}return 32},failTimeout:function(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==gb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ea.VERSION="2.0.4",ea.defaults={domEvents:!1,touchAction:Ya,enable:!0,inputTarget:null,inputClass:null,preset:[[ba,{enable:!1}],[_,{enable:!1},["rotate"]],[ca,{direction:Fa}],[$,{direction:Fa},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[aa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};fa.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&gb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],2===b.stopped||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(db|eb|fb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ha(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ga(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ea,{INPUT_START:wa,INPUT_MOVE:xa,INPUT_END:ya,INPUT_CANCEL:za,STATE_POSSIBLE:cb,STATE_BEGAN:db,STATE_CHANGED:eb,STATE_ENDED:fb,STATE_RECOGNIZED:gb,STATE_CANCELLED:hb,STATE_FAILED:32,DIRECTION_NONE:Aa,DIRECTION_LEFT:Ba,DIRECTION_RIGHT:Ca,DIRECTION_UP:Da,DIRECTION_DOWN:Ea,DIRECTION_HORIZONTAL:Fa,DIRECTION_VERTICAL:Ga,DIRECTION_ALL:Ha,Manager:fa,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:da,Pan:$,Swipe:ca,Pinch:_,Rotate:ba,Press:aa,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),"undefined"!=typeof module&&module.exports,a.Hammer=ea}(window,document),function(){"use strict";var a=Autodesk.Viewing;a.EventDispatcher=function(){},a.EventDispatcher.prototype={constructor:a.EventDispatcher,apply:function(b){b.addEventListener=a.EventDispatcher.prototype.addEventListener,b.hasEventListener=a.EventDispatcher.prototype.hasEventListener,b.removeEventListener=a.EventDispatcher.prototype.removeEventListener,b.fireEvent=a.EventDispatcher.prototype.fireEvent,b.dispatchEvent=a.EventDispatcher.prototype.fireEvent},addEventListener:function(a,b){a&&(void 0===this.listeners&&(this.listeners={}),void 0===this.listeners[a]&&(this.listeners[a]=[]),this.listeners[a].push(b))},hasEventListener:function(a,b){if(!a)return!1;if(void 0===this.listeners)return!1;var c=this.listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){if(a&&(void 0===this.listeners&&(this.listeners={}),this.listeners[a]instanceof Array))for(var c=this.listeners[a],d=0,e=c.length;d<e;d++)if(c[d]===b){c.splice(d,1);break}},dispatchEvent:function(a){if(void 0===this.listeners&&(this.listeners={}),"string"==typeof a&&(a={type:a}),!a.target)try{a.target=this}catch(a){}if(!a.type)throw new Error("event type unknown.");if(this.listeners[a.type]instanceof Array)for(var b=this.listeners[a.type].slice(),c=0;c<b.length;c++)b[c].call(this,a)}},a.EventDispatcher.prototype.fireEvent=a.EventDispatcher.prototype.dispatchEvent}(),"undefined"!=typeof window){var RTCPeerConnection=null,getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null;if(navigator.mozGetUserMedia)webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]),RTCPeerConnection=mozRTCPeerConnection,RTCSessionDescription=mozRTCSessionDescription,RTCIceCandidate=mozRTCIceCandidate,getUserMedia=navigator.mozGetUserMedia.bind(navigator),createIceServer=function(a,b,c){var d=null,e=a.split(":");if(0===e[0].indexOf("stun"))d={url:a};else if(0===e[0].indexOf("turn")&&(-1!==a.indexOf("transport=udp")||-1===a.indexOf("?transport"))){var f=a.split("?");d={url:f[0],credential:c,username:b}}return d},attachMediaStream=function(a,b){console.log("Attaching media stream"),a.mozSrcObject=b,a.play()},reattachMediaStream=function(a,b){console.log("Reattaching media stream"),a.mozSrcObject=b.mozSrcObject,a.play()},MediaStream.prototype.getVideoTracks=function(){return[]},MediaStream.prototype.getAudioTracks=function(){return[]};else if(navigator.webkitGetUserMedia){var match=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);webrtcDetectedBrowser="chrome",webrtcDetectedVersion=match?parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2]):40,createIceServer=function(a,b,c){var d=null,e=a.split(":");if(0===e[0].indexOf("stun"))d={url:a};else if(0===e[0].indexOf("turn"))if(webrtcDetectedVersion<28){var f=a.split("turn:");d={url:"turn:"+b+"@"+f[1],credential:c}}else d={url:a,credential:c,username:b};return d},RTCPeerConnection=webkitRTCPeerConnection,getUserMedia=navigator.webkitGetUserMedia.bind(navigator),attachMediaStream=function(a,b){void 0!==a.srcObject?a.srcObject=b:void 0!==a.mozSrcObject?a.mozSrcObject=b:void 0!==a.src?a.src=URL.createObjectURL(b):console.log("Error attaching stream to element.")},reattachMediaStream=function(a,b){a.src=b.src},webkitMediaStream.prototype.getVideoTracks||(webkitMediaStream.prototype.getVideoTracks=function(){return this.videoTracks},webkitMediaStream.prototype.getAudioTracks=function(){return this.audioTracks}),webkitRTCPeerConnection.prototype.getLocalStreams||(webkitRTCPeerConnection.prototype.getLocalStreams=function(){return this.localStreams},webkitRTCPeerConnection.prototype.getRemoteStreams=function(){return this.remoteStreams})}else console.log("Browser does not appear to be WebRTC-capable")}!function(){var a=Autodesk.Viewing,b=a.endpoint=a.endpoint||{},c=a.Private;b.ENDPOINT_API_DERIVATIVE_SERVICE_V2="derivativeV2",b.ENDPOINT_API_MODEL_DERIVATIVE_V2="modelDerivativeV2";var d={derivativeV2:{baseURL:"/derivativeservice/v2",itemURL:"/derivativeservice/v2/derivatives/:derivativeurn",manifestURL:"/derivativeservice/v2/manifest/:urn",thumbnailsURL:"/derivativeservice/v2/thumbnails/:urn"},modelDerivativeV2:{baseURL:"/modelderivative/v2/",itemURL:"/modelderivative/v2/designdata/:urn/manifest/:derivativeurn",manifestURL:"/modelderivative/v2/designdata/:urn/manifest",thumbnailsURL:"/modelderivative/v2/designdata/:urn/thumbnail"}},e="",f=b.ENDPOINT_API_DERIVATIVE_SERVICE_V2,g=!1;b.HTTP_REQUEST_HEADERS={},b.setEndpointAndApi=function(a,b){e=a,f=b},b.getEndpointAndApi=function(){return e+d[f].baseURL},b.getApiEndpoint=function(){return e},b.getManifestApi=function(a,b,c){var g=a||e;return c=c||f,g+=d[c].manifestURL,b=b||"",g=g.replace(":urn",b)},b.getItemApi=function(a,b,c){var g=(a||e)+d[c||f].itemURL;b=b||"";var h=b;return h=h.split("/"),h=h[0]||"",h=h.split(":"),h=h[h.length-1]||"",g=g.replace(":urn",h),g=g.replace(":derivativeurn",b)},b.getThumbnailApi=function(a,b,c){return((a||e)+d[c||f].thumbnailsURL).replace(":urn",b||"")},b.makeOssPath=function(a,b,c){return(a||e)+"/oss/v2/buckets/"+b+"/objects/"+encodeURIComponent(decodeURIComponent(c))},b.getUseCredentials=function(){return g},b.pathRequiresCredentials=function(a){return-1===a.indexOf("://")||-1!==a.indexOf(window.location.host)||c.urlIsApiViewingOrDev(a)},b.getDomainParam=function(){return this.getUseCredentials()&&!a.isNodeJS?"domain="+encodeURIComponent(window.location.origin):""},b.setUseCredentials=function(a){g=a},b.setApiEndpoint=function(a){e=a,f=b.ENDPOINT_API_DERIVATIVE_SERVICE_V2},a.getViewingUrl=function(a){return(a||e)+d[f].baseURL}}(),function(){"use strict";var a=Autodesk.Viewing,b=a.endpoint=a.endpoint||{},c=a.Private,d=a.getGlobal();b.PROTEIN_ROOT=null,b.PRISM_ROOT=null,d.LOCALIZATION_REL_PATH="",d.LMV_VIEWER_VERSION="3.1",d.LMV_VIEWER_PATCH="1",d.LMV_BUILD_TYPE="RELEASE",d.LMV_RESOURCE_VERSION=null,d.LMV_RESOURCE_ROOT="","v"===LMV_VIEWER_VERSION.charAt(0)&&(LMV_VIEWER_VERSION=LMV_VIEWER_VERSION.substr(1)),d.stderr=function(){console.warn('"stderr" is deprecated; please use "Autodesk.Viewing.Private.logger" instead')},c.env=null,c.docItemId=null,c.token={accessToken:null,getAccessToken:null,tokenRefreshInterval:null},c.assets=[],c.offline=!1,c.offlineResourcePrefix=null;var e={local:{RTC:["https://rtc-dev.api.autodesk.com:443","https://lmv.autodesk.com:443"]},dev:{RTC:["https://rtc-dev.api.autodesk.com:443","https://lmv.autodesk.com:443"]},stg:{RTC:["https://rtc-stg.api.autodesk.com:443","https://lmv.autodesk.com:443"]},prod:{RTC:["https://rtc.api.autodesk.com:443","https://lmv.autodesk.com:443"]}},f={local:"",dev:"https://viewing-dev.api.autodesk.com",stg:"https://viewing-staging.api.autodesk.com",prod:"https://viewing.api.autodesk.com"},g={local:"",dev:"https://developer-dev.api.autodesk.com",stg:"https://developer-stg.api.autodesk.com",prod:"https://developer.api.autodesk.com"},h={stg:{CLIENT_ID:"lmv-stag",CLIENT_KEY:"kjemi1rwAgsqIqyvDUtc9etPD6MsAzbV",ENDPOINT:"https://ase-stg.autodesk.com"},prod:{CLIENT_ID:"lmv-prod",CLIENT_KEY:"iaoUM2CRGydfn703yfPq4MAogZi8I5u4",ENDPOINT:"https://ase.autodesk.com"}}
;c.EnvironmentConfigurations={Local:{ROOT:"",LMV:e.local},Development:{ROOT:f.dev,LMV:e.dev,bubbleManifest:!0},Staging:{ROOT:f.stg,LMV:e.stg,bubbleManifest:!0},Production:{ROOT:f.prod,LMV:e.prod,bubbleManifest:!0},AutodeskDevelopment:{ROOT:g.dev,LMV:e.dev},AutodeskStaging:{ROOT:g.stg,LMV:e.stg},AutodeskProduction:{ROOT:g.prod,LMV:e.prod}},c.initializeEnvironmentVariable=function(a){var b;if(a&&a.env&&(b=a.env),b||(b=c.getParameterByName("env")),a&&a.offlineResourcePrefix&&(c.offlineResourcePrefix=a.offlineResourcePrefix),a&&a.offline&&"true"===a.offline&&(c.offline=!0),!b)switch(window.location.hostname){case"viewing-dev.api.autodesk.com":b="Development";break;case"viewing-staging.api.autodesk.com":b="Staging";break;case"viewing.api.autodesk.com":b="Production";break;case"developer-dev.api.autodesk.com":b="AutodeskDevelopment";break;case"developer-stg.api.autodesk.com":b="AutodeskStaging";break;case"developer.api.autodesk.com":b="AutodeskProduction";break;case"localhost.autodesk.com":case"":case"127.0.0.1":b="Local";break;default:b="AutodeskProduction"}c.env=b,"undefined"!=typeof window&&c.logger.info("Host name : "+window.location.hostname),c.logger.info("Environment initialized as : "+b)},c.initializeServiceEndPoints=function(b){var d=b.endpoint;if(!d){d=c.EnvironmentConfigurations[c.env].ROOT}var e=b.api||a.endpoint.ENDPOINT_API_DERIVATIVE_SERVICE_V2;if(a.endpoint.setEndpointAndApi(d,e),!a.isNodeJS){var f=["viewer3D.js","viewer3D.min.js","firefly.js","firefly.min.js"];b&&b.hasOwnProperty("libraryName")&&f.push(b.libraryName);for(var g,h,i=0;i<f.length;i++){var j=c.getScript(f[i]);h=j?j.src:"";var k=h.indexOf(f[i]);if(k>=0){g=h.substr(0,k);break}}LMV_RESOURCE_VERSION="v"+LMV_VIEWER_VERSION;var l=c.getParameterByNameFromPath("v",h);l&&l.length&&l!=LMV_RESOURCE_VERSION?(c.logger.warn("Version string mismatch between requested and actual version: "+l+" vs. "+LMV_RESOURCE_VERSION+". Using "+l),LMV_RESOURCE_VERSION=l):l&&l.length||(LMV_RESOURCE_VERSION=null,c.logger.info("No viewer version specified, will implicitly use "+LMV_VIEWER_VERSION)),LMV_RESOURCE_ROOT=g||LMV_RESOURCE_ROOT}},c.initLoadContext=function(b){b=b||{},b.auth=a.endpoint.getUseCredentials(),b.endpoint=a.endpoint.getApiEndpoint(),b.headers||(b.headers={});var c=a.endpoint;for(var d in c.HTTP_REQUEST_HEADERS)b.headers[d]=c.HTTP_REQUEST_HEADERS[d];var e=a.endpoint.getDomainParam();return e&&(b.queryParams?b.queryParams+="&"+e:b.queryParams=e),b},c.refreshRequestHeader=function(b){a.endpoint.HTTP_REQUEST_HEADERS.Authorization="Bearer "+b},c.refreshToken=function(a,b,d){c.token.accessToken=a,c.refreshRequestHeader(a),b instanceof Function&&b()},c.initializeAuth=function(b,d){function e(a,f){g=a,c.refreshToken(g,c.token.tokenRefreshInterval?null:b);var h=f-60;h<=0&&(h=f),c.token.tokenRefreshInterval=1e3*h,setTimeout(function(){d.getAccessToken(e)},c.token.tokenRefreshInterval)}var f=d?d.shouldInitializeAuth:void 0;if(void 0===f){f="false"!==c.getParameterByName("auth").toLowerCase()}if("Local"==c.env||!f)return setTimeout(b,0),a.endpoint.setUseCredentials(void 0!==d.useCredentials&&d.useCredentials),a.endpoint.getUseCredentials();a.endpoint.setUseCredentials(void 0===d.useCredentials||d.useCredentials);var g;return d&&d.getAccessToken?(c.token.getAccessToken=d.getAccessToken,"string"==typeof(g=d.getAccessToken(e))&&g&&c.refreshToken(g,b)):d&&d.accessToken?(g=d.accessToken,c.refreshToken(g,b)):(g=c.getParameterByName("accessToken"),g||(g="9AMaRKBoPCIBy61JmQ8OLLLyRblS",c.logger.warn("Warning : no access token is provided. Use built in token : "+g)),c.refreshToken(g,b)),a.endpoint.getUseCredentials()},c.initializeLogger=function(b){if(c.logger.initialize(b),!(b&&b.hasOwnProperty("useADP")&&0==b.useADP||a.isNodeJS)){var d="https://ase-cdn.autodesk.com/adp/v1.0.3/js/adp-web-analytics-sdk.min.js",e=function(){if("undefined"==typeof Adp)return void c.logger.warn("Autodesk Data Platform SDK not found");var a;switch(LMV_BUILD_TYPE){case"Production":a=h.prod;break;default:a=h.stg}var b={product:{name:"LMV",line_name:"LMV",key:a.CLIENT_ID,id:a.CLIENT_KEY,id_provider:"appkey",build_id:LMV_VIEWER_VERSION+"."+LMV_VIEWER_PATCH,build_tag:LMV_BUILD_TYPE}},d={server:a.ENDPOINT,enable_geo_data:!1,enable_browser_data:!0,enable_session_messages:!0};c.logger.adp=new Adp(b,d)};"function"==typeof require?require([d],function(a){window.Adp=a,e()}):c.loadDependency("Adp",d,e)}},c.initializeProtein=function(){if((!c.ENABLE_DEBUG||"Local"!=c.env||a.endpoint.getUseCredentials())&&!c.offline){var b=new XMLHttpRequest;b.open("GET","https://raas-assets.autodesk.com/StaticContent/BaseAddress?family=protein",!0),b.responseType="json",b.onload=function(d){var e=b.response.url;e&&e.length&&(e=e.replace("http://","https://"),a.endpoint.PROTEIN_ROOT=e+"/",c.logger.info("Protein root is: "+a.endpoint.PROTEIN_ROOT))},b.send();var d=new XMLHttpRequest;d.open("GET","https://raas-assets.autodesk.com/StaticContent/BaseAddress?family=prism",!0),d.responseType="json",d.onload=function(b){var e=d.response.url;e&&e.length&&(e=e.replace("http://","https://"),a.endpoint.PRISM_ROOT=e+"/",c.logger.info("Prism root is: "+a.endpoint.PRISM_ROOT))},d.send()}},c.getParameterByName=function(a){return"undefined"==typeof window?"":c.getParameterByNameFromPath(a,window.location.href)},c.getParameterByNameFromPath=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(b);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))},c.urlIsApiViewingOrDev=function(a){return-1!==a.indexOf("developer.api.autodesk.com")||-1!==a.indexOf("developer-stg.api.autodesk.com")||-1!==a.indexOf("developer-dev.api.autodesk.com")||-1!==a.indexOf("viewing.api.autodesk.com")||-1!==a.indexOf("viewing-staging.api.autodesk.com")||-1!==a.indexOf("viewing-dev.api.autodesk.com")},c.getDemoDocumentURN=function(){var a;switch(c.env){case"Development":a="urn:dXJuOmFkc2suYTM2MGJldGFkZXY6ZnMuZmlsZTplbnRlcnByaXNlLmxtdnRlc3QuRFM1YTczMFFUYmYwMDIyZDA3NTFhYmE5MjZlZDZkMjJlZDY0P3ZlcnNpb249MQ==";break;case"Staging":a="urn:dXJuOmFkc2suczM6ZGVyaXZlZC5maWxlOlZpZXdpbmdTZXJ2aWNlVGVzdEFwcC91c2Vycy9NaWNoYWVsX0hhbicvTU0zNTAwQXNzZW1ibHkuZHdm";break;case"Production":a="FIXME";break;default:a="https://lmv.rocks/viewer/data/gears/output/bubble.json"}return a},c.processMemoryOptions=function(a){if(a){var b;if(a.memory){b=0|parseInt(a.memory.limit);(a.memory.debug&&a.memory.debug.force||!1)&&b<=0&&(a.memory.force=!1,c.logger.warn("config.memory.limit value is invalid: ("+a.memory.limit+")"))}var d=c.getParameterByName("viewermemory");if((b=parseInt(d))>=0){b|=0;var e=b>0&&"f"===d.charAt(d.length-1).toLowerCase();a.memory={limit:b,debug:{force:e}},e?c.logger.info("Forcing memory limit to URL param: ("+b+" MegaBytes)."):c.logger.info("Setting memory limit to URL param: ("+b+" MegaBytes).")}else""!==d&&c.logger.warn("Invalid viewermemory URL param value: ("+d+")")}},c.setLanguage=function(a,b){var c={lng:a,resGetPath:"res/locales/__lng__/__ns__.json",ns:{namespaces:["allstrings"],defaultNs:"allstrings"},fallbackLng:"en",debug:!1};LOCALIZATION_REL_PATH="res/locales/"+a+"/",Autodesk.Viewing.i18n.init(c,function(a){Autodesk.Viewing.i18n.clearDebugLocString(),b&&b()})},c.extendLocalization=function(a){return null!==a&&"object"==typeof a&&(Object.keys(a).forEach(function(b){Autodesk.Viewing.i18n.addResourceBundle(b,"allstrings",a[b],!0,!0)}),!0)},c.initializeLocalization=function(a){var b=a&&a.language||navigator.language,d=b.split("-");b=d.length>1?d[0].toLowerCase()+"-"+d[1].toUpperCase():d[0].toLowerCase();var e=["cs","de","en","es","fr","it","nl","ja","ko","pl","pt-BR","ru","tr","zh-HANS","zh-HANT"];-1===e.indexOf(b)&&(b=b.indexOf("zh-CN")>-1?"zh-HANS":b.indexOf("zh-TW")>-1?"zh-HANT":d.length>1&&e.indexOf(d[0])>-1?d[0]:"en"),c.setLanguage(b)},c.initializeUserInfo=function(a){a&&a.userInfo&&(c.setUserName(a.userInfo.name),a.comment2Token&&(c.comment2Token=a.comment2Token))},c.getScript=function(a){a=a.toLowerCase();var b=document.getElementsByTagName("SCRIPT");if(b&&b.length>0)for(var c=0;c<b.length;++c)if(b[c].src&&-1!==b[c].src.toLowerCase().indexOf(a))return b[c];return null},c.getResourceUrl=function(a){var b=LMV_RESOURCE_VERSION;return LMV_RESOURCE_ROOT+a+(b?"?v="+b:"")},c.loadDependency=function(a,b,d,e,f){if(void 0===window[a]){var g=document.createElement("SCRIPT");g.src=b.indexOf("://")>0?b:c.getResourceUrl(b);var h=function(){g.onerror=null,g.onload=null},i=function(){h(),e&&e()},j=function(){h(),"function"==typeof define&&define.amd&&"function"==typeof require&&f?require([f],function(b){window[a]=b,d&&d()},i):d&&d()};g.onload=j,g.onerror=i,document.head.appendChild(g)}else d&&d()},c.injectCSS=function(a,b,d){for(var e=a.indexOf("://")>0?a:c.getResourceUrl(a),f=document.getElementsByTagName("link"),g=0,h=f.length;g<h;g++)if(f[g].href===e)return void(b&&b());var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),b&&(i.onload=b),d&&(i.onerror=d),document.head.appendChild(i)},c.getHtmlTemplate=function(a,b){function d(a){b(a,null)}function e(a){var c=a.currentTarget.responseText;b(null,c)}var f=a.indexOf("://")>0?a:c.getResourceUrl(a),g=new XMLHttpRequest;g.onload=e,g.onerror=d,g.ontimeout=d,g.open("GET",f,!0),g.send()},Autodesk.Viewing.createInitializerOptions=function(){return{env:"AutodeskProduction",api:void 0,getAccessToken:void 0,language:void 0,logLevel:c.LogLevels.ERROR,webGLHelpLink:null}},Autodesk.Viewing.createViewerConfig=function(){var b={extensions:[],sharedPropertyDbPath:void 0,canvasConfig:void 0,startOnInitialize:!0,experimental:[]};return Autodesk.Viewing.theExtensionManager.popuplateOptions(b),a.Viewer3D&&a.Viewer3D.populateConfigOptions(b),c.GuiViewer3D&&c.GuiViewer3D.populateConfigOptions(b),b},c.isExperimentalFlagEnabled=function(a,b){return!(!b||!Array.isArray(b.experimental))&&-1!==b.experimental.indexOf(a)},Autodesk.Viewing.Initializer=function(b,d){function e(){c.initializeLegacyNamespaces(!1),c.initWorkerScript(),THREE.warn=c.logger.warn.bind(c.logger),c.initializeAuth(d,b),c.initializeLocalization(b),c.initializeUserInfo(b)}a.isNodeJS?(c.initializeEnvironmentVariable(b),c.initializeServiceEndPoints(b),c.initializeLogger(b),c.initializeAuth(d,b)):(c.WEBGL_HELP_LINK=b?b.webGLHelpLink:null,c.initializeEnvironmentVariable(b),c.initializeServiceEndPoints(b),c.initializeLogger(b),c.disableDocumentTouchSafari(),c.loadDependency("Promise","es6-promise.min.js",function(){c.loadDependency("THREE","three.min.js",function(){c.loadDependency("WGS","wgs.js",e)})},null,"es6-promise-polyfill"))}}(),function(){"use strict";function a(a,b){function e(){return c.config.userName&&c.config.userName.length?c.config.userName:p?p.slice(0,5):"Unknown"}function f(a){switch(a.type){case"txt":j(a);break;case"joinok":i(a);break;case"join_error":break;case"sessionId":c.logger.info("Connect successful, your id is: "+a.id),p=a.id;break;case"joined":a.userStatus="joined",g(a);break;case"left":a.userStatus="left",h(a);break;case"camera":case"pointer":break;default:c.logger.log(a)}var b=a.roomId,d={type:o[a.type],data:a,channelId:b};u.dispatchEvent(d)}function g(a){if(a.user.name&&a.user.name.length||(a.user.name=a.user.id.slice(0,5)),a.roomId){var b=t[a.roomId];b?(b.users.push(a.user),c.logger.info(a.user+" joined room "+a.roomId)):c.logger.warn("Channel "+a.roomId+" does not exist for socket "+p)}}function h(a){c.logger.info(a.user+" left room "+a.room);for(var b in t){for(var d=t[b].users,e=-1,f=0;f<d.length;f++)if(d[f].id==a.user){e=f;break}-1!=e&&d.splice(e,1),delete t[b].userSet[a.user]}}function i(a){var b=t[a.roomId];c.logger.info("joined channel "+a.roomId),a.users&&a.users.length?b.users=a.users:b.users=[];for(var d=0;d<b.users.length;d++)b.users[d].name&&b.users[d].name.length||(b.users[d].name=b.users[d].id.slice(0,5));var f=e(),g=Autodesk.Viewing.i18n.translate("you"),h={id:p,name:f+" ("+g+")",isSelf:!0,status:0};b.userSet[p]||(b.users.push(h),b.userSet[p]=h),0!=h.id.indexOf(f)&&u.sendChatMessage("/nick "+f,a.roomId)}function j(a){if(0==a.msg.indexOf("/nick ")){var b=u.getUserById(a.from,a.roomId),c=a.msg.slice(6);if(c.length&&(b.name=c,b.id==p)){var d=Autodesk.Viewing.i18n.translate("you");b.name+=" ("+d+")"}u.dispatchEvent({type:"userListChange",data:a,channelId:a.roomId})}}function k(a){r<q.length?(c.logger.info("Connect failed, trying another server..."),n.disconnect(),n=null,r++,u.connect(u.sessionID)):u.dispatchEvent({type:"socketError",data:a})}function l(a){u.dispatchEvent({type:"socketError",data:a})}function m(a){r=0;for(var b in s)u.join(b)}var n,o={camera:"cameraChange",pointer:"pointerMove",joystick:"joystick",state:"viewerState",txt:"chatReceived",joinok:"userListChange",sessionId:"connectSucceeded",joined:"userListChange",left:"userListChange",private:"privateMessage",join_error:"socketError"},p=null,q=Array.isArray(a)?a:[a],r=0,s={},t={},u=this;this.connect=function(a){if(!n)return void 0!==window.WebSocket&&(d||(d="undefined"!=typeof lmv_io?lmv_io:io),this.sessionID=a,n=d.connect(q[r]+"?sessionID="+a,{path:b,forceNew:!0}),n.on("connect",m),n.on("message",f),n.on("connect_error",k),n.on("error",l),!0)},this.join=function(a){if(!n||!n.connected)return void(s[a]=1);delete s[a],t[a]={id:a,users:[],userSet:{}},n.emit("join",{roomId:a,name:e()})},this.disconnect=function(){n&&(n.disconnect(),n=null,t={},p=null)},this.sendMessage=function(a,b,c){var d={type:a,from:p,msg:b,roomId:c};n.emit("message",d)},this.sendPrivateMessage=function(a,b){var c={type:"private",target:a,from:p,msg:b};n.emit("message",c)},this.sendChatMessage=function(a,b){var c={type:"txt",from:p,msg:a,roomId:b};n.emit("message",c),f(c)},this.getUserById=function(a,b){for(var c=t[b].users,d=0;d<c.length;d++)if(c[d].id==a)return c[d];return null},this.getLocalId=function(){return p},this.getChannelInfo=function(a){return t[a]},this.isConnected=function(){return n}}var b=Autodesk.Viewing,c=b.Private;c.config={userName:""},c.setUserName=function(a){c.config.userName=a};var d;a.prototype.constructor=a,b.EventDispatcher.prototype.apply(a.prototype);var e={};a.GetInstance=function(a,b){a||(a=c.EnvironmentConfigurations[c.env].LMV.RTC),Array.isArray(a)||(a=[a]);var d=e[a[0]];return d||(d=new c.MessageClient(a,b),e[a[0]]=d,d)},Autodesk.Viewing.Private.MessageClient=a}(),AutodeskNamespace("Autodesk.Viewing.Private"),function(){var a=Autodesk.Viewing,b=a.Private;b.P2PClient=function(c){function d(c){try{l=new RTCPeerConnection(u),l.onicecandidate=function(a){a.candidate?r.sendPrivateMessage(m,{type:"candidate",label:a.candidate.sdpMLineIndex,id:a.candidate.sdpMid,candidate:a.candidate.candidate}):b.logger.log("End of candidates.")},l.ondatachannel=function(a){b.logger.log("Data channel added."),p=a.channel,p.onmessage=i,q.dispatchEvent({type:"dataChannelAdded",data:a.channel})},l.onaddstream=function(a){b.logger.log("Remote stream added."),o=a.stream,q.dispatchEvent({type:"remoteStreamAdded",data:a.stream})},l.onremovestream=function(a){b.logger.log("Remote stream removed. Event: ",a),o=null,q.dispatchEvent({type:"remoteStreamRemoved",data:a.stream})},c&&(p=l.createDataChannel("sendDataChannel",{reliable:!1,ordered:!1}),p.onmessage=i)}catch(c){return b.logger.error("Failed to create PeerConnection, exception: "+c.message,a.errorCodeString(a.ErrorCodes.NETWORK_FAILURE)),void alert("Cannot create RTCPeerConnection object.")}}function f(c){b.logger.error("createOffer() error: ",e,a.errorCodeString(a.ErrorCodes.UNKNOWN_FAILURE))}function g(a){if(l.setLocalDescription(a),r.sendPrivateMessage(m,a),t.length){for(var b=0;b<t.length;b++)l.addIceCandidate(t[b]);t=[]}}function h(a){for(var b=a.split("\n"),c=!1,d=!1,e=!1,f=0;f<b.length;f++)0==b[f].indexOf("a=mid:data")&&(c=!0),0==b[f].indexOf("a=mid:video")&&(e=!0),0==b[f].indexOf("a=mid:audio")&&(d=!0);return c&&!e&&!d}function i(a){var b=JSON.parse(a.data);switch(b.type){case"camera":q.dispatchEvent({type:"cameraChange",data:b});break;case"joystick":q.dispatchEvent({type:"joystick",data:b});break;case"state":q.dispatchEvent({type:"viewerState",data:b})}}function j(a){var c=a.data.msg;if(b.logger.debug("Client received message:"+JSON.stringify(c)),"offer"!=c.type||s)if("answer"===c.type&&s)l.setRemoteDescription(new RTCSessionDescription(c));else if("candidate"===c.type){var d=new RTCIceCandidate({sdpMLineIndex:c.label,candidate:c.candidate});s?l.addIceCandidate(d):t.push(d)}else"bye"===c&&s&&(q.dispatchEvent({type:"remoteHangup",data:null}),b.logger.info("Session terminated."),k());else b.logger.log("Received offer. Accepting."),q.receiveCall(a.data)}function k(){s=!1,l.close(),l=null,n=null,o=null,m=null}var l,m,n,o,p,q=this,r=c,s=!1,t=[],u={iceServers:[{url:"stun:stun.l.google.com:19302"}]},v={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},w={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};r.addEventListener("privateMessage",j),this.hangup=function(){b.logger.log("Hanging up."),s&&(r.sendPrivateMessage(m,"bye"),k())},this.initUserMedia=function(c){function d(a){b.logger.log("Adding local stream."),c&&c(a),q.dispatchEvent({type:"localStreamAdded",data:a})}function e(c){b.logger.error("getUserMedia error: ",c,a.errorCodeString(a.ErrorCodes.NETWORK_SERVER_ERROR))}var f={video:!0,audio:!0};window.getUserMedia(f,d,e),b.logger.log("Getting user media with constraints",f)},this.callUser=function(a,c){if(m)return void b.logger.warn("Already in a call. Ignoring call request.");m=a,b.logger.info("Calling user "+m),c?(d(!0),s=!0,b.logger.log("Sending data channel offer to peer"),l.createOffer(g,f)):this.initUserMedia(function(a){n=a,s||void 0===n||(d(!1),l.addStream(n),s=!0,b.logger.log("Sending audio/video offer to peer"),l.createOffer(g,f))})},this.receiveCall=function(a){(m=a.from)||(m=a.senderId),h(a.msg.sdp)?(d(!0),s=!0,l.setRemoteDescription(new RTCSessionDescription(a.msg)),b.logger.log("Sending data-only answer to peer."),l.createAnswer(g,null,w)):this.initUserMedia(function(c){n=c,s||void 0===n||(d(!1),l.addStream(n),s=!0),l.setRemoteDescription(new RTCSessionDescription(a.msg)),b.logger.log("Sending audio+video answer to peer."),l.createAnswer(g,null,v)})},this.getCurrentCallTarget=function(){return m},this.dataChannel=function(){return p}},b.P2PClient.prototype.constructor=b.P2PClient,Autodesk.Viewing.EventDispatcher.prototype.apply(b.P2PClient.prototype)}(),AutodeskNamespace("Autodesk.Viewing.Private.Collaboration"),function(){var a=Autodesk.Viewing,b=(a.Extensions,a.Private),c=b.Collaboration;c.JoyStick=function(b,c,d){function e(a,b,c){return a>c?c:a<b?b:a}var f,g,h,i=this,j=this.position=[0,0];this.dragStart=function(a){},this.dragMove=function(a){var d=(a.center.x-c.offsetLeft)/c.offsetWidth,f=(a.center.y-c.offsetTop)/c.offsetHeight;d=e(d,0,1),f=e(f,0,1),d=2*d-1,f=-(2*f-1);var g=Math.sqrt(d*d+f*f);d/=g,f/=g;var i=g/.7;i=e(i,0,1),j[0]=d*i,j[1]=f*i,b.sendState();var k=.7*j[0]*.5+.5,l=.7*-j[1]*.5+.5;h.style.left=100*k-10+"%",h.style.top=100*l-10+"%"},this.dragEnd=function(a){j[0]=0,j[1]=0,b.sendState(),h.style.left="40%",h.style.top="40%"},this.onSingleTap=function(a){},this.onDoubleTap=function(a){},function(){if(g=document.createElement("div"),g.classList.add("joystickOuterRing"),c.appendChild(g),h=document.createElement("div"),h.classList.add("joystickInnerRing"),d){var a=document.createElement("span");a.classList.add("buttonText"),a.textContent=d,h.appendChild(a)}c.appendChild(h)}(),function(){f=new Hammer.Manager(c,{recognizers:[a.GestureRecognizers.singletap,a.GestureRecognizers.doubletap,a.GestureRecognizers.drag]}),f.on("dragstart",i.dragStart),f.on("dragmove",i.dragMove),f.on("dragend",i.dragEnd),f.on("singletap",i.onSingleTap),f.on("doubletap",i.onDoubleTap)}()},c.Slider=function(b,c,d){function e(a,b,c){return a>c?c:a<b?b:a}var f,g,h,i=this,j=i.position=0;this.dragStart=function(a){},this.dragMove=function(a){var d=(a.center.y-c.offsetTop)/c.offsetHeight;d=e(d,0,1),d=-(2*d-1),i.position=j=d,console.log(j),b.sendState();var f=.5*-j+.5;g.style.top=100*f-5+"%"},this.dragEnd=function(a){g.style.top="45%",i.position=j=0,b.sendState()},this.updateLayout=function(a){c.style.bottom=.125*a+"px",c.style.left=.46*a+"px",c.style.width=.08*a+"px",c.style.height=.25*a+"px",f.style.borderRadius=.02*a+"px",g.style.borderRadius=.02*a+"px"},function(){f=document.createElement("div"),f.classList.add("sliderBody"),c.appendChild(f),g=document.createElement("div"),g.classList.add("sliderThumb");var a=document.createElement("span");a.classList.add("buttonText"),a.style.fontSize="xx-small",a.textContent=d,g.appendChild(a),c.appendChild(g)}(),function(){"ontouchstart"in window&&(h=new Hammer.Manager(c,{recognizers:[a.GestureRecognizers.singletap,a.GestureRecognizers.drag]}),h.on("dragstart",i.dragStart),h.on("dragmove",i.dragMove),h.on("dragend",i.dragEnd))}()},c.RemoteControl=function(a){function d(){u.showNotification(!1)}function e(){function b(a,b,c){var f=.1*d;a.style.width=f+"px",a.style.height=f+"px",a.style.borderRadius=.5*f+"px",b?(a.style.left=d*a.anchorX-f+"px",a.tipText.style.right=d-a.offsetLeft+"px"):(a.style.left=d*a.anchorX+"px",a.tipText.style.left=a.offsetLeft+f+"px"),c?(a.style.bottom=.95*e-f+"px",a.tipText.style.bottom=.95*e-a.tipText.offsetHeight+"px"):(a.style.bottom=.05*e+"px",a.tipText.style.bottom=.05*e+"px")}var c=a.getBoundingClientRect(),d=c.right-c.left,e=.5*d;f.style.width=.5*d+"px",f.style.height=.5*d+"px",g.style.width=.5*d+"px",g.style.height=.5*d+"px",r.updateLayout(d),b(k,!0,!0),b(l,!1,!0),b(m,!1,!1),b(n,!0,!1),b(o,!1,!0),b(p,!0,!0)}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this;this.connect=function(a){this.showNotification(!0,"CONTACTING MOTHERSHIP","cyan"),s=b.MessageClient.GetInstance(),s.connect(),s.join(a),t=new b.P2PClient(s),t.addEventListener("dataChannelAdded",d);var c=function(a){var b=s.getChannelInfo(a.channelId).users;if(b&&2==b.length&&!t.getCurrentCallTarget()){u.showNotification(!0,"INITIATING DIRECT LINK","green");var c=b[0];c.id==s.getLocalId()&&(c=b[1]),t.callUser(c.id,!0)}else t.getCurrentCallTarget()&&(console.log("Unexpected user event."),console.log(a.data))};s.addEventListener("userListChange",c)},this.sendState=function(a){var b={x1:i.position[0],y1:i.position[1],x2:j.position[0],y2:j.position[1],explode:r.position};a&&(console.log(a),b.command=a);var c=t?t.dataChannel():null;c&&"open"==c.readyState?(q&&d(),c.send(JSON.stringify({type:"joystick",msg:b}))):q||this.showNotification(!0)},this.showNotification=function(b,c,d){if(b){q&&a.removeChild(q),q=document.createElement("div"),q.classList.add("errorBox");var e=document.createElement("span");e.classList.add("errorText"),e.classList.add("blink");var f=Autodesk.Viewing.i18n.translate("DISCONNECTED"),g=Autodesk.Viewing.i18n.translate("Reload main viewer and pair again");e.innerHTML=c?Autodesk.Viewing.i18n.translate(c):"<p>"+f+"</p> "+g,d&&(e.style.color=d),q.appendChild(e),a.appendChild(q)}else q&&(a.removeChild(q),q=null)},function(){function b(a,b,c,d,e){var f=document.createElement("div");f.classList.add("joystickButton"),f.style.backgroundColor=c;var g=document.createElement("span");g.classList.add("buttonText"),g.innerHTML=b,f.appendChild(g),f.onclick=function(a){u.sendState(d),f.classList.add("clicked")};var h=document.createElement("div");return h.classList.add("tipText"),h.textContent=e,f.tipText=h,a.appendChild(f),a.appendChild(h),f}f=document.createElement("div"),f.style.position="absolute",f.style.left="0%",f.style.bottom="0%",a.appendChild(f),g=document.createElement("div"),g.style.position="absolute",g.style.right="0%",g.style.bottom="0%",a.appendChild(g),k=b(a,"R","blue","gohome","RESET VIEW"),k.anchorX=.475,l=b(a,"S","red","select","SELECT"),l.anchorX=.525,m=b(a,"H","yellow","hide","HIDE"),m.anchorX=.525,n=b(a,"A","green","fly","AUTO MOVE"),n.anchorX=.475,o=b(a,"&#9733","#ff7700","savepoint","SAVE"),o.anchorX=.025,p=b(a,"&#9654","#ff7700","nextsavepoint","NEXT"),p.anchorX=.975,window,window.addEventListener("orientationchange",e),window.addEventListener("resize",e),i=new c.JoyStick(u,f,"W"),j=new c.JoyStick(u,g,"L"),h=document.createElement("div"),h.style.position="absolute",h.style.left="45%",h.style.width="10%",h.style.height="50%",a.appendChild(h),r=new c.Slider(u,h,"EXPLODE")}(),e()}}();